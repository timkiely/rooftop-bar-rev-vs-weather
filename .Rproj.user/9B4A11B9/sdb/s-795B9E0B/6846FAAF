{
    "collab_server" : "",
    "contents" : "\n\nrm(list=ls())\nlibrary(tidyverse)\nlibrary(ggrepel)\nlibrary(plotly)\n\nrev_ts <- readRDS(\"weather-revenue-data-v002.rds\")\n\n\nrev_ts_model <- \n  rev_ts %>% mutate(Happy_Hour = grepl(\"Happy Hour\",Special)\n                    ,Special_ind = ifelse(is.na(Special),FALSE,TRUE)\n                    ,Rain_ind = grepl(\"Rain\",Events)\n                    ,Events = factor(Events)) %>% \n  filter(Earnings>0) %>% \n  filter(!is.na(Earnings))\n\nrev_ts_model_ex_spec <- \n  rev_ts %>% mutate(Happy_Hour = grepl(\"Happy Hour\",Special)\n                    ,Special_ind = ifelse(is.na(Special),FALSE,TRUE)\n                    ,Rain_ind = grepl(\"Rain\",Events)\n                    ,Events = factor(Events)) %>% \n  filter(Earnings>0) %>% \n  filter(!is.na(Earnings)) %>% \n  filter(Special_ind==FALSE)\n\n\n# specials with labels --------------------------------------------------------\nrev_ts_model %>% ggplot() + aes(x = Earnings, y = Mean_TemperatureF) + geom_point() + geom_smooth() + ggrepel::geom_text_repel(aes(label=Special), size = 2)\n\n# rain indicator ----------------------------------------------------------\nplotly::ggplotly(rev_ts_model %>% ggplot() + aes(x = Earnings, y = Mean_TemperatureF, label = Special) + geom_point(aes(color = Rain_ind)) + geom_smooth(method=\"lm\"))\n\n\n\n# specials indicator ------------------------------------------------------\nplotly::ggplotly(rev_ts_model %>% ggplot() + aes(x = Earnings, y = Mean_TemperatureF, label = Special) + geom_point(aes(color = Special_ind)) + geom_smooth(method=\"lm\"))\n\n\n# log earnings -----------------------------------------------------------\nrev_ts_model %>% ggplot() + aes(x = log(Earnings), y = Mean_TemperatureF) + geom_point() + geom_smooth()\n\n\n\n\n\n\n\n\n\n",
    "created" : 1496251747232.000,
    "dirty" : true,
    "encoding" : "UTF-8",
    "folds" : "",
    "hash" : "1275695521",
    "id" : "6846FAAF",
    "lastKnownWriteTime" : 1496254062,
    "last_content_update" : 1496260480058,
    "path" : "~/Dropbox (hodgeswardelliott)/hodgeswardelliott Team Folder/Teams/Data/Tim_Kiely/Weather vs Revenue/weather-revenue-EDA.R",
    "project_path" : "weather-revenue-EDA.R",
    "properties" : {
        "tempName" : "Untitled1"
    },
    "relative_order" : 4,
    "source_on_save" : false,
    "source_window" : "",
    "type" : "r_source"
}